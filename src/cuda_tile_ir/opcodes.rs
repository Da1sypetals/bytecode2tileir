// Opcode definitions from BytecodeOpcodes.td
// FROZEN for backward compatibility - DO NOT CHANGE VALUES

#[repr(u64)]
#[derive(Debug, Clone, Copy, PartialEq, Eq)]
pub enum Opcode {
    AbsF = 0x0,
    AbsI = 0x1,
    AddF = 0x2,
    AddI = 0x3,
    AndI = 0x4,
    Assert = 0x5,
    Assume = 0x6,
    AtomicCASTko = 0x7,
    AtomicRMWTko = 0x8,
    Bitcast = 0x9,
    Break = 0xA,
    Broadcast = 0xB,
    Cat = 0xC,
    Ceil = 0xD,
    CmpF = 0xE,
    CmpI = 0xF,
    Constant = 0x10,
    Continue = 0x11,
    Cos = 0x12,
    CosH = 0x13,
    DivF = 0x14,
    DivI = 0x15,
    Entry = 0x16,
    Exp = 0x17,
    Exp2 = 0x18,
    ExtI = 0x25,
    Extract = 0x26,
    Floor = 0x27,
    Fma = 0x28,
    For = 0x29,
    FToF = 0x2A,
    FToI = 0x2B,
    GetGlobal = 0x2C,
    GetIndexSpaceShape = 0x2D,
    GetNumTileBlocks = 0x2E,
    GetTensorShape = 0x2F,
    GetTileBlockId = 0x30,
    Global = 0x31,
    If = 0x32,
    IntToPtr = 0x33,
    Iota = 0x3A,
    IToF = 0x3B,
    JoinTokens = 0x3C,
    LoadPtrTko = 0x3D,
    LoadViewTko = 0x3E,
    Log = 0x3F,
    Log2 = 0x40,
    Loop = 0x41,
    MakePartitionView = 0x42,
    MakeTensorView = 0x43,
    MakeToken = 0x44,
    MaxF = 0x45,
    MaxI = 0x46,
    MinF = 0x47,
    MinI = 0x48,
    MmaF = 0x49,
    MmaI = 0x4A,
    Module = 0x4B,
    MulF = 0x4C,
    MulhiI = 0x4D,
    MulI = 0x4E,
    NegF = 0x4F,
    NegI = 0x50,
    Offset = 0x51,
    OrI = 0x52,
    Permute = 0x53,
    Pow = 0x54,
    Print = 0x55,
    PtrToInt = 0x56,
    PtrToPtr = 0x57,
    Reduce = 0x58,
    RemF = 0x59,
    RemI = 0x5A,
    Reshape = 0x5B,
    Return = 0x5C,
    Rsqrt = 0x5D,
    Scan = 0x5E,
    Select = 0x5F,
    ShLI = 0x60,
    ShRI = 0x61,
    Sin = 0x62,
    SinH = 0x63,
    Sqrt = 0x64,
    StorePtrTko = 0x65,
    StoreViewTko = 0x66,
    SubF = 0x67,
    SubI = 0x68,
    Tan = 0x69,
    TanH = 0x6A,
    TruncI = 0x6B,
    XOrI = 0x6C,
    Yield = 0x6D,
    Atan2 = 0x6E,
}

impl Opcode {
    pub fn from_u64(value: u64) -> Option<Self> {
        match value {
            0x0 => Some(Self::AbsF),
            0x1 => Some(Self::AbsI),
            0x2 => Some(Self::AddF),
            0x3 => Some(Self::AddI),
            0x4 => Some(Self::AndI),
            0x5 => Some(Self::Assert),
            0x6 => Some(Self::Assume),
            0x7 => Some(Self::AtomicCASTko),
            0x8 => Some(Self::AtomicRMWTko),
            0x9 => Some(Self::Bitcast),
            0xA => Some(Self::Break),
            0xB => Some(Self::Broadcast),
            0xC => Some(Self::Cat),
            0xD => Some(Self::Ceil),
            0xE => Some(Self::CmpF),
            0xF => Some(Self::CmpI),
            0x10 => Some(Self::Constant),
            0x11 => Some(Self::Continue),
            0x12 => Some(Self::Cos),
            0x13 => Some(Self::CosH),
            0x14 => Some(Self::DivF),
            0x15 => Some(Self::DivI),
            0x16 => Some(Self::Entry),
            0x17 => Some(Self::Exp),
            0x18 => Some(Self::Exp2),
            0x25 => Some(Self::ExtI),
            0x26 => Some(Self::Extract),
            0x27 => Some(Self::Floor),
            0x28 => Some(Self::Fma),
            0x29 => Some(Self::For),
            0x2A => Some(Self::FToF),
            0x2B => Some(Self::FToI),
            0x2C => Some(Self::GetGlobal),
            0x2D => Some(Self::GetIndexSpaceShape),
            0x2E => Some(Self::GetNumTileBlocks),
            0x2F => Some(Self::GetTensorShape),
            0x30 => Some(Self::GetTileBlockId),
            0x31 => Some(Self::Global),
            0x32 => Some(Self::If),
            0x33 => Some(Self::IntToPtr),
            0x3A => Some(Self::Iota),
            0x3B => Some(Self::IToF),
            0x3C => Some(Self::JoinTokens),
            0x3D => Some(Self::LoadPtrTko),
            0x3E => Some(Self::LoadViewTko),
            0x3F => Some(Self::Log),
            0x40 => Some(Self::Log2),
            0x41 => Some(Self::Loop),
            0x42 => Some(Self::MakePartitionView),
            0x43 => Some(Self::MakeTensorView),
            0x44 => Some(Self::MakeToken),
            0x45 => Some(Self::MaxF),
            0x46 => Some(Self::MaxI),
            0x47 => Some(Self::MinF),
            0x48 => Some(Self::MinI),
            0x49 => Some(Self::MmaF),
            0x4A => Some(Self::MmaI),
            0x4B => Some(Self::Module),
            0x4C => Some(Self::MulF),
            0x4D => Some(Self::MulhiI),
            0x4E => Some(Self::MulI),
            0x4F => Some(Self::NegF),
            0x50 => Some(Self::NegI),
            0x51 => Some(Self::Offset),
            0x52 => Some(Self::OrI),
            0x53 => Some(Self::Permute),
            0x54 => Some(Self::Pow),
            0x55 => Some(Self::Print),
            0x56 => Some(Self::PtrToInt),
            0x57 => Some(Self::PtrToPtr),
            0x58 => Some(Self::Reduce),
            0x59 => Some(Self::RemF),
            0x5A => Some(Self::RemI),
            0x5B => Some(Self::Reshape),
            0x5C => Some(Self::Return),
            0x5D => Some(Self::Rsqrt),
            0x5E => Some(Self::Scan),
            0x5F => Some(Self::Select),
            0x60 => Some(Self::ShLI),
            0x61 => Some(Self::ShRI),
            0x62 => Some(Self::Sin),
            0x63 => Some(Self::SinH),
            0x64 => Some(Self::Sqrt),
            0x65 => Some(Self::StorePtrTko),
            0x66 => Some(Self::StoreViewTko),
            0x67 => Some(Self::SubF),
            0x68 => Some(Self::SubI),
            0x69 => Some(Self::Tan),
            0x6A => Some(Self::TanH),
            0x6B => Some(Self::TruncI),
            0x6C => Some(Self::XOrI),
            0x6D => Some(Self::Yield),
            0x6E => Some(Self::Atan2),
            _ => None,
        }
    }

    pub fn name(&self) -> &'static str {
        match self {
            Self::AbsF => "absf",
            Self::AbsI => "absi",
            Self::AddF => "addf",
            Self::AddI => "addi",
            Self::AndI => "andi",
            Self::Assert => "assert",
            Self::Assume => "assume",
            Self::AtomicCASTko => "atomic_cas_tko",
            Self::AtomicRMWTko => "atomic_rmw_tko",
            Self::Bitcast => "bitcast",
            Self::Break => "break",
            Self::Broadcast => "broadcast",
            Self::Cat => "cat",
            Self::Ceil => "ceil",
            Self::CmpF => "cmpf",
            Self::CmpI => "cmpi",
            Self::Constant => "constant",
            Self::Continue => "continue",
            Self::Cos => "cos",
            Self::CosH => "cosh",
            Self::DivF => "divf",
            Self::DivI => "divi",
            Self::Entry => "entry",
            Self::Exp => "exp",
            Self::Exp2 => "exp2",
            Self::ExtI => "exti",
            Self::Extract => "extract",
            Self::Floor => "floor",
            Self::Fma => "fma",
            Self::For => "for",
            Self::FToF => "ftof",
            Self::FToI => "ftoi",
            Self::GetGlobal => "get_global",
            Self::GetIndexSpaceShape => "get_index_space_shape",
            Self::GetNumTileBlocks => "get_num_tile_blocks",
            Self::GetTensorShape => "get_tensor_shape",
            Self::GetTileBlockId => "get_tile_block_id",
            Self::Global => "global",
            Self::If => "if",
            Self::IntToPtr => "int_to_ptr",
            Self::Iota => "iota",
            Self::IToF => "itof",
            Self::JoinTokens => "join_tokens",
            Self::LoadPtrTko => "load_ptr_tko",
            Self::LoadViewTko => "load_view_tko",
            Self::Log => "log",
            Self::Log2 => "log2",
            Self::Loop => "loop",
            Self::MakePartitionView => "make_partition_view",
            Self::MakeTensorView => "make_tensor_view",
            Self::MakeToken => "make_token",
            Self::MaxF => "maxf",
            Self::MaxI => "maxi",
            Self::MinF => "minf",
            Self::MinI => "mini",
            Self::MmaF => "mmaf",
            Self::MmaI => "mmai",
            Self::Module => "module",
            Self::MulF => "mulf",
            Self::MulhiI => "mulhii",
            Self::MulI => "muli",
            Self::NegF => "negf",
            Self::NegI => "negi",
            Self::Offset => "offset",
            Self::OrI => "ori",
            Self::Permute => "permute",
            Self::Pow => "pow",
            Self::Print => "print",
            Self::PtrToInt => "ptr_to_int",
            Self::PtrToPtr => "ptr_to_ptr",
            Self::Reduce => "reduce",
            Self::RemF => "remf",
            Self::RemI => "remi",
            Self::Reshape => "reshape",
            Self::Return => "return",
            Self::Rsqrt => "rsqrt",
            Self::Scan => "scan",
            Self::Select => "select",
            Self::ShLI => "shli",
            Self::ShRI => "shri",
            Self::Sin => "sin",
            Self::SinH => "sinh",
            Self::Sqrt => "sqrt",
            Self::StorePtrTko => "store_ptr_tko",
            Self::StoreViewTko => "store_view_tko",
            Self::SubF => "subf",
            Self::SubI => "subi",
            Self::Tan => "tan",
            Self::TanH => "tanh",
            Self::TruncI => "trunci",
            Self::XOrI => "xori",
            Self::Yield => "yield",
            Self::Atan2 => "atan2",
        }
    }
}
